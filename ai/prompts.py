# ai/prompts.py

# ai/prompts.py

# Prompt to verify if a text is a resume
VERIFY_RESUME_PROMPT = """
Проанализируй текст и является ли следующий текст резюме.
Ориентируйся на следующие признаки резюме:

— Наличие персональных данных (ФИО, возраст, дата рождения, контакты, город проживания, гражданство).
— Указание желаемой должности, зарплаты, формата работы.
— Описание опыта работы с указанием компаний, должностей, обязанностей, достижений и технологий.
— Наличие раздела "Образование" с вузом, факультетом и специальностью.
— Перечисление навыков (hard skills, soft skills, языки).
— Дополнительная информация о себе, семье, личных качествах.
— Форматные признаки: разделы с заголовками ("Опыт работы", "Образование", "Навыки"), списки, хронология.

Если большинство этих признаков присутствует → это резюме.
Если текст не имеет структуры резюме (нет опыта работы, образования, контактов и т.д.) → это не резюме.

Ответь в формате JSON с двумя ключами:
- "is_resume": boolean (true, если это резюме, иначе false)
- "title": string (придумай краткое название резюме, например "Senior BI Analyst" или "Junior Frontend Developer", если это резюме, иначе null)

Текст:
---
{text}
---
"""

# Prompt to verify if a text is a vacancy
VERIFY_VACANCY_PROMPT = """
Проанализируй текст и определи, является ли он описанием вакансии.
Ориентируйся на следующие признаки вакансии:

- Название должности/позиции (например, "Разработчик", "Аналитик", "Менеджер").
- Описание компании (чем занимается, ее ценности).
- Требования к кандидату (опыт, навыки, образование).
- Обязанности (что нужно будет делать).
- Условия работы (график, зарплата, бонусы, офис/удаленка).
- Контактная информация для отклика.

Если большинство этих признаков присутствует → это вакансия.
Если текст не содержит четких указаний на должность, требования и обязанности → это не вакансия.

Ответь в формате JSON с двумя ключами:
- "is_vacancy": boolean (true, если это вакансия, иначе false)
- "title": string (извлеки из текста название вакансии, например "Senior Python Developer", если это вакансия, иначе null)

Текст:
---
{text}
---
"""

# Prompt to analyze the match between a resume and a vacancy
ANALYZE_MATCH_PROMPT = """
Проанализируй соответствие резюме и вакансию. Ответь на русском языке.

Проведи анализ и предоставь:
1. Процент соответствия резюме требованиям вакансии (только число от 0 до 100) и кол-во полностью покрытых требований из общего кол-ва требований (например, 7 из 9).
2. Список наиболее совпадающих требований вакансии с резюме (до 5 пунктов) - 
3. Список критических несоответствий между требованиями вакансии и резюме (до 5 пунктов)

Основные компоненты оценки соответствия включают извлечение ключевых требований вакансии (необходимые навыки, опыт, образование и т.д.) и извлечение информации из резюме (указанные навыки, опыт работы, достижения). 
Определи ключевые требования вакансии. Вес ключевых требований должен быть выше в 2 раза (x2). 
То есть за каждое покрытое неключевое требование +1 бал, за каждое покрытое ключевое требование +2 балла. 
За каждое не покрытое ключевое требование -2 балла.
Результат делим на общее кол-во требований и считаем процент, это и будет процент соответствия. Процент не может быть больше 100, лимит сверху 100, лимит снизу 0. Выше 100 или ниже 0 быть не может, округляет.

Метрика «процент соответствия» вычисляется как отношение совпадающих навыков к общему количеству требований с учетов веса ключевых навыков.
Например, всего 9 требований, из них 5 требований ключевых, вакансия же покрывает 6 требований, из них 3 ключевых, значит 
При этом важно учитывать не только точное совпадение терминов, но и семантическую близость навыков: например, навык «Support Vector Machine» и «Decision Tree» относятся к одной области (машинное обучение), хотя слова не совпадают напрямую.

Дополнительно:
1. Длинна ответа должна быть не более 1200 символов.
2. Можно использовать разные эмодзи для каждого совпадения или несоответствия, чтобы пользователь мог визуально понять и оценить.
3. Если ключеные требования вакансии есть в соответствиях, то необходимо выделить жирным эти пункты и подобрать зеленый эмодзи привлекающий больше внимания на это ключевое соответствие.
4. Если ключеные требования вакансии есть в несоответствиях, то необходимо выделить жирным эти пункты и подобрать красный эмодзи привлекающий больше внимания на это ключевое несоответствие.

Формат ответа:
ПРОЦЕНТ СООТВЕТСТВИЯ: [число]% ([число] из [число])
СОВПАДЕНИЯ:
- [эмодзи] [пункт]
...
НЕСООТВЕТСТВИЯ:
- [эмодзи] [пункт]
...


РЕЗЮМЕ:
---
{resume_text}
---

ВАКАНСИЯ:
+++
{vacancy_text}
+++
"""

# Prompt to generate a cover letter
GENERATE_COVER_LETTER_PROMPT = """Н
Напиши сопроводительное письмо для отклика на вакансию, основываясь на Резюме и Вакансии приложенныъ ниже.
Письмо должно быть вежливым, профессиональным и подчеркивать релевантный опыт кандидата.

Ограничения:
1. Длинна ответа не более 1500 символов.
2. Не должно содержать контактов, персональных данных.
3. Никакой воды, только факты.
4. Не должно содержать контактов, персональных данных.
5. Не должно быть призывов к действию.
6. Не должно быть вопросов.

Резюме:
---
{resume_text}
---

Вакансия:
---
{vacancy_text}
---
"""

# Prompt to generate a plan for an HR call
GENERATE_HR_CALL_PLAN_PROMPT = """
Составь план для созвона с HR по данной вакансии, учитывая информацию из резюме. Созвон по длительности 15 минут, вопросы с обеих стороны должны уложиться в эти 15 минут. 
Вопросы от кандидата должны быть структурированы и последовательны, чтобы понимать что его ждет дальше на собеседованиях, что важно, а что нет, чтобы получить ключевые данные.

План должен включать:
1. Краткое представление себя.
2. Примерные вопросы от HR по резюме кандидата. 5-10 вопросов, сформулируй их кратко. Расставь красные флаги для ответов кандидата и приведи правильный пример ответа. Красные флаги должны быть краткими: словами или словосочетаниями. Примеры правильных ответов также должны быть краткими.
3. Вопросы от кандидата к HR по вакансии, команде, отделе, компании, процессам. 5-10 вопросов, сформулируй их кратко. Расставь красные флаги для ответов от HR и приведи правильный пример ответа. И там где важно понимать конкретный ответ но HR его не дала, то нужно добить еще вопросом. Красные флаги должны быть краткими: словами или словосочетаниями. Примеры правильных ответов также должны быть краткими.

Ограничения:
1. Длина ответа не более 3800 символов.
2. Не должно содержать контактов, персональных данных.
3. Никакой воды, только факты.
4. Обязательные вопросы от кандидата: позиция новая или нет, вилка, сколько времени занимает весь процесс найма, когда будет фидбек по текущему созвону.
5. В вопросах от HR не должно быть глубоких технических деталей, вопросы должны быть поверхностными, чаще всего HR своими вопросами лишь подтвердить указанный в резюме конкретный навык или опыт. Особенно если этот навык явно присутствует в вакансии.
6. Можно использовать разные смайлики, чтобы пользователь мог визуально быстро понять и оценить.
7. Не должно быть призывов к действию.

Резюме:
---
{resume_text}
---

Вакансия:
---
{vacancy_text}
---
"""

# Prompt to generate a plan for a technical interview
GENERATE_TECH_INTERVIEW_PLAN_PROMPT = """
Составь подробный план для технического собеседования по данной вакансии, основываясь на резюме.
План должен включать:
1. Возможные технические вопросы от интервьюера по требованиям из вакансии. 10-15 вопросов, сформулируй их кратко. Расставь красные флаги для ответов кандидата и приведи правильный пример ответа. Красные флаги должны быть краткими: словами или словосочетаниями. Примеры правильных ответов также должны быть краткими.
2. Вопросы, которые кандидат должен задать интервьюеру - техническому специалисту по требованиям из вакансии и по работе в этой компании. 10-15 вопросов, сформулируй их кратко. Расставь красные флаги для ответов кандидата и приведи правильный пример ответа. Красные флаги должны быть краткими: словами или словосочетаниями. Примеры правильных ответов также должны быть краткими.



Ограничения:
1. Длина ответа не более 10000 символов.
2. Не должно содержать контактов, персональных данных.
3. Никакой воды, только факты.
4. Обязательные вопросы от кандидата: позиция новая или нет, вилка, сколько времени занимает весь процесс найма, когда будет фидбек по текущему созвону.
5. В вопросах от HR не должно быть глубоких технических деталей, вопросы должны быть поверхностными, чаще всего HR своими вопросами лишь подтвердить указанный в резюме конкретный навык или опыт. Особенно если этот навык явно присутствует в вакансии.
6. Можно использовать разные смайлики, чтобы пользователь мог визуально быстро понять и оценить.
7. Не должно быть призывов к действию.

Резюме:
---
{resume_text}
---

Вакансия:
---
{vacancy_text}
---
"""
