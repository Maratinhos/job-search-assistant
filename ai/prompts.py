# ai/prompts.py

# ai/prompts.py

# Prompt to verify if a text is a resume
VERIFY_RESUME_PROMPT = """
Проанализируй текст и является ли следующий текст резюме.
Ориентируйся на следующие признаки резюме:

— Наличие персональных данных (ФИО, возраст, дата рождения, контакты, город проживания, гражданство).
— Указание желаемой должности, зарплаты, формата работы.
— Описание опыта работы с указанием компаний, должностей, обязанностей, достижений и технологий.
— Наличие раздела "Образование" с вузом, факультетом и специальностью.
— Перечисление навыков (hard skills, soft skills, языки).
— Дополнительная информация о себе, семье, личных качествах.
— Форматные признаки: разделы с заголовками ("Опыт работы", "Образование", "Навыки"), списки, хронология.

Если большинство этих признаков присутствует → это резюме.
Если текст не имеет структуры резюме (нет опыта работы, образования, контактов и т.д.) → это не резюме.

Ответь в формате JSON с двумя ключами:
- "is_resume": boolean (true, если это резюме, иначе false)
- "title": string (придумай краткое название резюме, например "Senior BI Analyst" или "Junior Frontend Developer", если это резюме, иначе null)

Текст:
---
{text}
---
"""

# Prompt to verify if a text is a vacancy
VERIFY_VACANCY_PROMPT = """
Проанализируй текст и определи, является ли он описанием вакансии.
Ориентируйся на следующие признаки вакансии:

- Название должности/позиции (например, "Разработчик", "Аналитик", "Менеджер").
- Описание компании (чем занимается, ее ценности).
- Требования к кандидату (опыт, навыки, образование).
- Обязанности (что нужно будет делать).
- Условия работы (график, зарплата, бонусы, офис/удаленка).
- Контактная информация для отклика.

Если большинство этих признаков присутствует → это вакансия.
Если текст не содержит четких указаний на должность, требования и обязанности → это не вакансия.

Ответь в формате JSON с двумя ключами:
- "is_vacancy": boolean (true, если это вакансия, иначе false)
- "title": string (извлеки из текста название вакансии, например "Senior Python Developer", если это вакансия, иначе null)

Текст:
---
{text}
---
"""

# Prompt to analyze the match between a resume and a vacancy
ANALYZE_MATCH_PROMPT = """
Проанализируй соответствие резюме и вакансии. Ответь на русском языке.

РЕЗЮМЕ:
---
{resume_text}
---

ВАКАНСИЯ:
+++
{vacancy_text}
+++

Проведи анализ и предоставь:
1. Процент соответствия резюме требованиям вакансии (только число от 0 до 100)
2. Список наиболее совпадающих требований вакансии с резюме (до 5 пунктов) - 
3. Список критических несоответствий между требованиями вакансии и резюме (до 5 пунктов)

Ограничения:
1. Длинна ответа не более 1200 символов.
2. Можно использовать разные смайлики для каждого совпадения или несоответствия, чтобы пользователь мог визуально понять и оценить.

Формат ответа:
ПРОЦЕНТ_СООТВЕТСТВИЯ: [число]%
СОВПАДЕНИЯ:
- [пункт 1]
- [пункт 2]
...
НЕСООТВЕТСТВИЯ:
- [пункт 1]
- [пункт 2]
...
"""

# Prompt to generate a cover letter
GENERATE_COVER_LETTER_PROMPT = """
Напиши сопроводительное письмо для отклика на вакансию, основываясь на Резюме и Вакансии приложенныъ ниже.
Письмо должно быть вежливым, профессиональным и подчеркивать релевантный опыт кандидата.

Ограничения:
1. Длинна ответа не более 1500 символов.
2. Не должно содержать контактов, персональных данных.
3. Никакой воды, только факты.

Резюме:
---
{resume_text}
---

Вакансия:
---
{vacancy_text}
---
"""

# Prompt to generate a plan for an HR call
GENERATE_HR_CALL_PLAN_PROMPT = """
Составь план для созвона с HR по данной вакансии, учитывая информацию из резюме. Созвон по длительности 15 минут, вопросы с обеих стороны должны уложиться в эти 15 минут. 
Вопросы от кандидата должны быть структурированы и последовательны, чтобы понимать что его ждет дальше на собеседованиях, что важно, а что нет, чтобы получить ключевые данные.

План должен включать:
1. Краткое представление себя.
2. Примерные вопросы от HR по резюме кандидата. 5-15 вопросов, сформулируй их кратко. Расставь красные флаги для ответов кандидата и приведи правильный пример ответа.
3. Вопросы от кандидата к HR. 5-15 вопросов, сформулируй их кратко. Расставь красные флаги для ответов от HR и приведи правильный пример ответа. И там где важно понимать конкретный ответ но HR его не дала, то нужно добить еще вопросом.

Ограничения:
1. Длинна ответа не более 3800 символов.
2. Не должно содержать контактов, персональных данных.
3. Никакой воды, только факты.
4. Обязательные вопросы от кандидата: позиция новая или нет, вилка, сколько времени занимает весь процесс найма, когда будет фидбек по текущему созвону.

Резюме:
---
{resume_text}
---

Вакансия:
---
{vacancy_text}
---
"""

# Prompt to generate a plan for a technical interview
GENERATE_TECH_INTERVIEW_PLAN_PROMPT = """
Составь подробный план для технического собеседования по данной вакансии, основываясь на резюме.
План должен включать:
1. Возможные технические вопросы от интервьюера и как на них отвечать.
2. "Красные флаги" для интервьюера, которые могут возникнуть из-за резюме.
3. Вопросы, которые кандидат должен задать техническому специалисту.
4. "Красные флаги" для кандидата, на которые стоит обратить внимание во время интервью.

Резюме:
---
{resume_text}
---

Вакансия:
---
{vacancy_text}
---
"""
